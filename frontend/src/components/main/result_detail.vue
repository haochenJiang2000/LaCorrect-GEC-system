<template>
    <div v-if="LoggedIn">
      <div style="font-size: 28px;" v-if="FileName">
        《{{ FileName }}》纠错结果如下：
      </div>
      <div>
        &nbsp
      </div>
      <div style="font-size: 14px;">
        纠错力度 ：
        <el-select v-model="result_mode" placeholder="均衡">
          <el-option label="准确优先" value="准确优先" />
          <el-option label="均衡（推荐）" value="均衡" />
          <el-option label="数量优先" value="数量优先" />
        </el-select>
        <el-button type="primary" @click="ChangeResultMode()" >确认修改</el-button>
      </div>
      <div>
        &nbsp
      </div>
      <el-alert type="info" v-if="date">
        在原文档中搜索请复制原始文本，纠错结果仅供参考！文件提交日期：{{ date }}
      </el-alert>
      <h3></h3>
      <div v-if="Errors" v-for="idx in ErrorNum" :key="idx">
        <el-card class="box-card">
          <template #header>
            <div class="card-header">
              <!-- <span>Id:{{ idx }} Page:{{ Errors[idx-1].page }}</span> -->
              <span style="font-size: 16px;">
                Id:{{ idx }}&nbsp&nbsp&nbsp
                <el-button link type="primary" size="small" 
                  @click="copy(Errors[idx-1].src)"
                  >
                  复制原始文本
                </el-button>
                <el-button link type="primary" size="small" 
                  @click="copy_tgt(Errors[idx-1].tgt)"
                  >
                  复制纠错文本
                </el-button>
              </span>
              <div>
                <div v-if="Errors[idx-1].judge=='useful'">
                  <el-button @click="Update_Judge(idx-1, Errors[idx-1].id, 'useful')">
                    <el-icon>
                      <svg t="1676212247779" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3599" width="200" height="200"><path d="M906.408999 322.196472c-101.966327 0.643013-203.920011 1.295057-305.886339 1.939876 14.357613-50.554187 21.634859-95.47298 21.634858-135.021891 0-89.729212-78.61737-177.594409-157.128172-166.193572-69.230464 10.051594-76.818378 69.884314-76.818379 144.847708v67.689761c0 86.877197-72.925982 160.899552-157.471353 169.041975l-11.111843-0.095729v596.676322h602.570006c56.37201 0 104.784025-40.085358 115.28356-95.47298 28.07402-148.082641 56.137202-296.177926 84.211222-444.262374 12.04385-63.669124-29.798956-125.046159-93.457243-137.100847a116.257111 116.257111 0 0 0-21.826317-2.048249zM0.333247 479.870122v444.275017c0 42.507494 34.426482 76.935782 76.935782 76.935783h69.262976V403.665857c-23.090669-0.236614-46.172307-0.48226-69.262976-0.727905C34.78321 402.936146 0.333247 437.384302 0.333247 479.870122z" fill="#231815" p-id="3600"></path></svg>
                    </el-icon>  
                  </el-button>
                  <el-button @click="Update_Judge(idx-1, Errors[idx-1].id, 'unuseful')">
                    <el-icon>
                      <svg t="1676212189847" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3321" width="200" height="200"><path d="M906.654644 625.006824c-136.004473-0.865178-271.999915-1.724937-407.995357-2.593726 9.329107 32.817144 18.652795 65.634287 27.980096 98.449624 1.580439 5.563146 3.090436 11.153386 4.531797 16.759881 1.370918 5.335563 2.665975 10.6928 3.879752 16.066294 1.154172 5.104367 2.237902 10.223184 3.23674 15.352838a464.441422 464.441422 0 0 1 2.611788 14.65022c0.736936 4.627526 1.405236 9.260471 1.988645 13.913284 0.538252 4.381881 1.015094 8.774599 1.38898 13.176348 0.175203 2.064505 0.339569 4.139848 0.469616 6.204353 0.139079 2.075343 0.25287 4.150685 0.346794 6.222415 0.086698 1.945295 0.155335 3.888784 0.189652 5.832273 0.027093 0.971744 0.043349 1.954326 0.052381 2.92607 0.018062 0.971744 0.025287 1.941682 0.018062 2.913427 0 0.72068-0.009031 1.443167-0.027093 2.162041s-0.05238 1.441361-0.086699 2.162041c-0.045155 0.711649-0.088505 1.43233-0.14811 2.151203-0.061411 0.711649-0.130048 1.43233-0.198683 2.145785a87.23844 87.23844 0 0 1-0.608695 4.502897c-0.234808 1.491935-0.511159 2.985676-0.825441 4.470385a90.635933 90.635933 0 0 1-1.085536 4.607658c-0.399174 1.528059-0.830859 3.048893-1.309507 4.557084-0.487678 1.553346-1.007869 3.099467-1.562377 4.634751a108.57166 108.57166 0 0 1-5.998444 13.550234 112.563398 112.563398 0 0 1-10.649451 16.622609 107.480706 107.480706 0 0 1-6.119461 7.221252 99.354539 99.354539 0 0 1-6.386781 6.283827 83.851784 83.851784 0 0 1-6.422905 5.205515 68.681374 68.681374 0 0 1-6.206159 4.071212 54.498964 54.498964 0 0 1-5.745574 2.924264c-1.649075 0.718874-3.332469 1.354662-5.059212 1.85679-1.407042 0.417236-2.828535 0.756805-4.269895 0.971744-1.172234 0.184234-2.351694 0.287188-3.532959 0.29622-0.52019 0.009031-1.040381-0.009031-1.553346-0.043349a21.445206 21.445206 0 0 1-1.493741-0.155335 48.731715 48.731715 0 0 1-2.463679-0.435298c-0.581602-0.111985-1.155978-0.251064-1.728549-0.408205a30.655103 30.655103 0 0 1-0.747774-1.882077c-0.397368-1.101792-0.745967-2.221646-1.058442-3.3415a82.446548 82.446548 0 0 1-1.206553-4.965289 118.487788 118.487788 0 0 1-1.128885-6.292857 170.559197 170.559197 0 0 1-0.971744-7.506635c-0.312475-2.871884-0.556315-5.74738-0.76403-8.628295a269.433282 269.433282 0 0 1-0.294413-4.685325 390.798372 390.798372 0 0 1-0.373887-8.341107c-0.121016-3.59437-0.198684-7.194159-0.25287-10.78853a853.169871 853.169871 0 0 1-0.077667-11.579653v-67.689761c0-13.990951-1.266158-27.990934-3.782217-41.756108a237.13091 237.13091 0 0 0-10.770468-39.379127 242.979438 242.979438 0 0 0-7.708931-18.549841 249.393312 249.393312 0 0 0-9.121392-17.697307 253.66682 253.66682 0 0 0-22.04487-32.625685 258.397301 258.397301 0 0 0-26.549573-28.633946 260.05902 260.05902 0 0 0-14.782074-12.713957 260.745382 260.745382 0 0 0-15.717694-11.577846 256.103406 256.103406 0 0 0-32.468544-18.800905 251.768487 251.768487 0 0 0-25.622984-10.734344V99.713976H822.190552c1.224615 0 2.445617 0.05238 3.663007 0.164365a40.069102 40.069102 0 0 1 16.50701 5.207322 40.733789 40.733789 0 0 1 5.685969 3.948389 40.594711 40.594711 0 0 1 8.971477 10.450767 40.813263 40.813263 0 0 1 3.038055 6.256733c0.41543 1.110823 0.791123 2.239708 1.119854 3.375819 0.330538 1.181265 0.606889 2.369756 0.832666 3.567277 28.077632 148.08806 56.146233 296.174314 84.21664 444.262374a41.055296 41.055296 0 0 1 0.695393 9.244215 39.595873 39.595873 0 0 1-1.329375 8.704156 40.815069 40.815069 0 0 1-3.184359 8.183966 40.849387 40.849387 0 0 1-11.205766 13.470761c-1.154172 0.903108-2.360725 1.733968-3.610626 2.497997-1.249902 0.774867-2.552184 1.468454-3.877946 2.091598-1.363693 0.641207-2.759898 1.206552-4.183197 1.6852a41.423764 41.423764 0 0 1-5.747381 1.491935l-1.04038 0.182428c-0.686362 0.113792-1.379949 0.20049-2.07173 0.278157a35.203155 35.203155 0 0 1-4.015219 0.229389z m21.568029 74.748455c63.669124-12.045656 105.513736-73.426304 93.466273-137.09904-28.068601-148.086254-56.148039-296.172508-84.21664-444.269599-10.499535-55.382203-58.904325-95.47298-115.276335-95.47298H219.629577v596.688965l11.117262-0.106566c84.53634 8.142423 157.45871 82.168391 157.45871 169.040169v67.689761c0 74.972425 7.595139 134.801533 76.820184 144.858545 78.512609 11.40445 157.129979-76.46436 157.129979-166.202603 0-39.548912-7.271827-84.456867-21.64389-135.014667 101.962715 0.641207 203.92543 1.293251 305.889952 1.936264a116.295041 116.295041 0 0 0 21.820899-2.048249zM0.329634 544.126266V99.856667c0-42.502075 34.431901-76.943007 76.941201-76.943007h69.252139v597.416871l-69.252139 0.727905C34.777791 621.060242 0.329634 586.621116 0.329634 544.126266zM51.658689 521.219831a25.287028 25.287028 0 0 0 0.391949 2.543153c0.337762 1.63282 0.832666 3.227708 1.473872 4.766604a26.10705 26.10705 0 0 0 5.537859 8.191191c1.181265 1.181265 2.474516 2.239708 3.845435 3.177135 1.370918 0.92117 2.837566 1.719518 4.356593 2.36253 1.53709 0.650238 3.133785 1.145141 4.764799 1.473873 0.823635 0.175203 1.665331 0.303444 2.508834 0.391949 0.814604 0.088505 1.640044 0.139079 2.465485 0.139078 6.101399-0.070442 12.211828-0.131854 18.322258-0.198683V99.717588h-18.053131c-0.903108 0-1.80441 0.041543-2.698487 0.139079-0.859759 0.086698-1.710487 0.207715-2.552184 0.381111a25.462231 25.462231 0 0 0-9.121392 3.845435 26.199167 26.199167 0 0 0-3.836404 3.168103 25.818055 25.818055 0 0 0-3.168103 3.845435 25.494743 25.494743 0 0 0-2.369756 4.347562 26.029383 26.029383 0 0 0-1.473872 4.755768c-0.173397 0.850728-0.303444 1.701456-0.391949 2.552183-0.084892 0.903108-0.130048 1.806216-0.130048 2.700294v393.077817c-0.001806 0.894077 0.043349 1.797185 0.128242 2.689456z" fill="#231815" p-id="3322"></path></svg>
                    </el-icon>
                  </el-button>
                </div>
                <div v-else-if="Errors[idx-1].judge=='unuseful'">
                  <el-button @click="Update_Judge(idx-1, Errors[idx-1].id, 'useful')">
                    <el-icon>
                      <svg t="1676212218817" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3460" width="200" height="200"><path d="M928.237122 324.242915c63.658286 12.054687 105.501093 73.431723 93.457243 137.100846-28.07402 148.086254-56.137202 296.179733-84.211222 444.262374-10.499535 55.387622-58.91155 95.47298-115.28356 95.47298H219.629577V404.402793l11.111843 0.09573c84.543565-8.142423 157.471354-82.164778 157.471354-169.041975V167.766786c0-74.963394 7.587915-134.796115 76.818378-144.847708 78.508997-11.400837 157.128173 76.46436 157.128173 166.193572 0 39.548912-7.275439 84.467704-21.634859 135.021892 101.964521-0.643013 203.918205-1.296863 305.886339-1.939876 7.329626 0.001806 14.626739 0.675525 21.826317 2.048249z m-21.580672 74.748454c-135.997248 0.866984-271.994497 1.724937-407.991745 2.593727 9.323688-32.820756 18.654602-65.628868 27.976484-98.440593a654.540267 654.540267 0 0 0 4.533603-16.768912c1.370918-5.335563 2.667781-10.6928 3.877946-16.062682 1.157785-5.098949 2.239708-10.223184 3.234934-15.363675a415.095594 415.095594 0 0 0 4.59682-28.55628 336.89546 336.89546 0 0 0 1.865822-19.386119c0.139079-2.068118 0.256483-4.145266 0.352212-6.213384 0.075861-1.950714 0.149916-3.888784 0.193265-5.839497 0.019868-0.975357 0.032512-1.939876 0.05238-2.915233 0.010837-0.975357 0.010837-1.950714 0.010837-2.926071 0-0.717068-0.010837-1.435942-0.032511-2.153009a50.956974 50.956974 0 0 0-0.086699-2.163848 65.94315 65.94315 0 0 0-0.151722-2.153009 46.311385 46.311385 0 0 0-0.20049-2.143979 71.898245 71.898245 0 0 0-0.60147-4.511928 97.378538 97.378538 0 0 0-3.215065-13.627902 106.40962 106.40962 0 0 0-3.343306-9.182804 105.531798 105.531798 0 0 0-4.222934-9.000375 113.605585 113.605585 0 0 0-5.003219-8.604815 106.469225 106.469225 0 0 0-5.648038-8.014181 102.412463 102.412463 0 0 0-6.117655-7.223059 95.653602 95.653602 0 0 0-6.386781-6.280214 84.75128 84.75128 0 0 0-6.419292-5.218159 69.327999 69.327999 0 0 0-6.213384-4.060374 54.303892 54.303892 0 0 0-5.743768-2.926071 44.5142 44.5142 0 0 0-5.057406-1.864015 32.334884 32.334884 0 0 0-4.275314-0.975357 25.901141 25.901141 0 0 0-3.525734-0.288994 18.604028 18.604028 0 0 0-1.553346 0.043349 17.668408 17.668408 0 0 0-1.499159 0.160753c-0.406399 0.054186-0.827247 0.117404-1.233646 0.191459-0.406399 0.075861-0.812797 0.149916-1.221002 0.236615a28.953647 28.953647 0 0 0-1.735774 0.406398c-0.26732 0.621338-0.514772 1.253514-0.738742 1.88569-0.397368 1.103598-0.751386 2.218034-1.062056 3.343306a78.438554 78.438554 0 0 0-1.208358 4.961676 123.588543 123.588543 0 0 0-1.127079 6.300083 160.007281 160.007281 0 0 0-0.975357 7.501216c-0.310669 2.871884-0.558121 5.741962-0.760417 8.624683-0.108373 1.564183-0.21494 3.128367-0.299832 4.69255a444.126908 444.126908 0 0 0-0.364856 8.335688 513.980516 513.980516 0 0 0-0.258289 10.792142 852.109622 852.109622 0 0 0-0.074055 11.572428v67.689761c0 13.992757-1.275189 27.987321-3.784023 41.756108a238.070143 238.070143 0 0 1-10.766855 39.388158 248.192179 248.192179 0 0 1-7.71435 18.549841 253.823961 253.823961 0 0 1-9.117779 17.690082 253.114118 253.114118 0 0 1-22.043064 32.627491 260.086113 260.086113 0 0 1-41.337065 41.349709 259.123399 259.123399 0 0 1-15.708663 11.572428 257.22326 257.22326 0 0 1-32.477575 18.806324 254.26829 254.26829 0 0 1-25.632015 10.73615v456.347767h525.775108c1.221002 0 2.452842-0.05238 3.663007-0.158947a40.446601 40.446601 0 0 0 22.192979-9.161129 40.495369 40.495369 0 0 0 4.938195-4.844272 42.33771 42.33771 0 0 0 4.040506-5.606496 39.953504 39.953504 0 0 0 4.145266-9.643388c0.344987-1.177653 0.623145-2.36795 0.848922-3.567277 28.063182-148.084448 56.135396-296.168895 84.211222-444.253343 0.287188-1.553346 0.500322-3.128367 0.608694-4.703388 0.117404-1.509997 0.139079-3.0218 0.086699-4.542634a40.545943 40.545943 0 0 0-1.325763-8.700543 40.901768 40.901768 0 0 0-8.081012-15.546104 41.118514 41.118514 0 0 0-6.312725-6.119461 39.682572 39.682572 0 0 0-3.608821-2.485353 39.23463 39.23463 0 0 0-8.068368-3.784023 42.399121 42.399121 0 0 0-4.542634-1.253514c-0.397368-0.084892-0.794735-0.160753-1.192102-0.236615a42.364803 42.364803 0 0 0-3.124755-0.460585 36.422351 36.422351 0 0 0-4.018831-0.223971zM77.269029 402.936146c23.090669 0.245645 46.172307 0.491291 69.262976 0.727905v597.415064H77.269029c-42.5093 0-76.935782-34.428288-76.935782-76.935782v-444.275017c0-42.484013 34.449963-76.93217 76.935782-76.93217z m-25.738582 102.533479v393.076011c0 0.899496 0.041543 1.798991 0.139079 2.700293 0.086698 0.857953 0.21494 1.703262 0.38653 2.550378 0.332344 1.625595 0.823635 3.224096 1.477485 4.757573a25.686202 25.686202 0 0 0 5.530634 8.187579 25.890304 25.890304 0 0 0 8.185773 5.539665 25.380951 25.380951 0 0 0 7.316982 1.864015c0.901302 0.095729 1.800798 0.137272 2.702099 0.137273h18.065775v-444.347266c-6.106817-0.075861-12.226278-0.139079-18.334901-0.204103a26.067313 26.067313 0 0 0-4.970707 0.523803c-1.629207 0.343181-3.225902 0.836278-4.757574 1.479291a26.713939 26.713939 0 0 0-4.362012 2.367949 25.90656 25.90656 0 0 0-3.834597 3.171716 25.951715 25.951715 0 0 0-3.182553 3.845435c-0.92117 1.372724-1.715905 2.828535-2.358919 4.351175a24.725295 24.725295 0 0 0-1.477485 4.757573c-0.171591 0.847115-0.299832 1.694231-0.38653 2.550378a24.727101 24.727101 0 0 0-0.139079 2.691262z" fill="#231815" p-id="3461"></path></svg>
                    </el-icon>  
                  </el-button>
                  <el-button @click="Update_Judge(idx-1, Errors[idx-1].id, 'unuseful')">
                    <el-icon>
                      <svg t="1676211828341" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2312" width="200" height="200"><path d="M0.324216 544.126266V99.856667c0-42.502075 34.439126-76.943007 76.950232-76.943007h69.252138v597.416871l-69.252138 0.727905C34.779598 621.060242 0.324216 586.621116 0.324216 544.126266zM906.401774 701.805334c-101.960909-0.643013-203.927236-1.295057-305.889952-1.936264 14.372063 50.5578 21.64389 95.465755 21.64389 135.014667 0 89.738243-78.615563 177.607053-157.128172 166.202603-69.225045-10.057012-76.829216-69.88612-76.829216-144.858545v-67.689761c0-86.871778-72.916951-160.897746-157.451485-169.040169l-11.119068 0.106567V22.915466h602.566394c56.362979 0 104.7768 40.090776 115.278141 95.47298 28.068601 148.097091 56.146233 296.181539 84.21664 444.269599 12.045656 63.672736-29.79715 125.053384-93.46808 137.09904a116.62016 116.62016 0 0 1-21.819092 2.048249z" fill="#231815" p-id="2313"></path></svg>
                    </el-icon>
                  </el-button>
                </div>
                <div v-else>
                  <el-button @click="Update_Judge(idx-1, Errors[idx-1].id, 'useful')">
                    <el-icon>
                      <svg t="1676212218817" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3460" width="200" height="200"><path d="M928.237122 324.242915c63.658286 12.054687 105.501093 73.431723 93.457243 137.100846-28.07402 148.086254-56.137202 296.179733-84.211222 444.262374-10.499535 55.387622-58.91155 95.47298-115.28356 95.47298H219.629577V404.402793l11.111843 0.09573c84.543565-8.142423 157.471354-82.164778 157.471354-169.041975V167.766786c0-74.963394 7.587915-134.796115 76.818378-144.847708 78.508997-11.400837 157.128173 76.46436 157.128173 166.193572 0 39.548912-7.275439 84.467704-21.634859 135.021892 101.964521-0.643013 203.918205-1.296863 305.886339-1.939876 7.329626 0.001806 14.626739 0.675525 21.826317 2.048249z m-21.580672 74.748454c-135.997248 0.866984-271.994497 1.724937-407.991745 2.593727 9.323688-32.820756 18.654602-65.628868 27.976484-98.440593a654.540267 654.540267 0 0 0 4.533603-16.768912c1.370918-5.335563 2.667781-10.6928 3.877946-16.062682 1.157785-5.098949 2.239708-10.223184 3.234934-15.363675a415.095594 415.095594 0 0 0 4.59682-28.55628 336.89546 336.89546 0 0 0 1.865822-19.386119c0.139079-2.068118 0.256483-4.145266 0.352212-6.213384 0.075861-1.950714 0.149916-3.888784 0.193265-5.839497 0.019868-0.975357 0.032512-1.939876 0.05238-2.915233 0.010837-0.975357 0.010837-1.950714 0.010837-2.926071 0-0.717068-0.010837-1.435942-0.032511-2.153009a50.956974 50.956974 0 0 0-0.086699-2.163848 65.94315 65.94315 0 0 0-0.151722-2.153009 46.311385 46.311385 0 0 0-0.20049-2.143979 71.898245 71.898245 0 0 0-0.60147-4.511928 97.378538 97.378538 0 0 0-3.215065-13.627902 106.40962 106.40962 0 0 0-3.343306-9.182804 105.531798 105.531798 0 0 0-4.222934-9.000375 113.605585 113.605585 0 0 0-5.003219-8.604815 106.469225 106.469225 0 0 0-5.648038-8.014181 102.412463 102.412463 0 0 0-6.117655-7.223059 95.653602 95.653602 0 0 0-6.386781-6.280214 84.75128 84.75128 0 0 0-6.419292-5.218159 69.327999 69.327999 0 0 0-6.213384-4.060374 54.303892 54.303892 0 0 0-5.743768-2.926071 44.5142 44.5142 0 0 0-5.057406-1.864015 32.334884 32.334884 0 0 0-4.275314-0.975357 25.901141 25.901141 0 0 0-3.525734-0.288994 18.604028 18.604028 0 0 0-1.553346 0.043349 17.668408 17.668408 0 0 0-1.499159 0.160753c-0.406399 0.054186-0.827247 0.117404-1.233646 0.191459-0.406399 0.075861-0.812797 0.149916-1.221002 0.236615a28.953647 28.953647 0 0 0-1.735774 0.406398c-0.26732 0.621338-0.514772 1.253514-0.738742 1.88569-0.397368 1.103598-0.751386 2.218034-1.062056 3.343306a78.438554 78.438554 0 0 0-1.208358 4.961676 123.588543 123.588543 0 0 0-1.127079 6.300083 160.007281 160.007281 0 0 0-0.975357 7.501216c-0.310669 2.871884-0.558121 5.741962-0.760417 8.624683-0.108373 1.564183-0.21494 3.128367-0.299832 4.69255a444.126908 444.126908 0 0 0-0.364856 8.335688 513.980516 513.980516 0 0 0-0.258289 10.792142 852.109622 852.109622 0 0 0-0.074055 11.572428v67.689761c0 13.992757-1.275189 27.987321-3.784023 41.756108a238.070143 238.070143 0 0 1-10.766855 39.388158 248.192179 248.192179 0 0 1-7.71435 18.549841 253.823961 253.823961 0 0 1-9.117779 17.690082 253.114118 253.114118 0 0 1-22.043064 32.627491 260.086113 260.086113 0 0 1-41.337065 41.349709 259.123399 259.123399 0 0 1-15.708663 11.572428 257.22326 257.22326 0 0 1-32.477575 18.806324 254.26829 254.26829 0 0 1-25.632015 10.73615v456.347767h525.775108c1.221002 0 2.452842-0.05238 3.663007-0.158947a40.446601 40.446601 0 0 0 22.192979-9.161129 40.495369 40.495369 0 0 0 4.938195-4.844272 42.33771 42.33771 0 0 0 4.040506-5.606496 39.953504 39.953504 0 0 0 4.145266-9.643388c0.344987-1.177653 0.623145-2.36795 0.848922-3.567277 28.063182-148.084448 56.135396-296.168895 84.211222-444.253343 0.287188-1.553346 0.500322-3.128367 0.608694-4.703388 0.117404-1.509997 0.139079-3.0218 0.086699-4.542634a40.545943 40.545943 0 0 0-1.325763-8.700543 40.901768 40.901768 0 0 0-8.081012-15.546104 41.118514 41.118514 0 0 0-6.312725-6.119461 39.682572 39.682572 0 0 0-3.608821-2.485353 39.23463 39.23463 0 0 0-8.068368-3.784023 42.399121 42.399121 0 0 0-4.542634-1.253514c-0.397368-0.084892-0.794735-0.160753-1.192102-0.236615a42.364803 42.364803 0 0 0-3.124755-0.460585 36.422351 36.422351 0 0 0-4.018831-0.223971zM77.269029 402.936146c23.090669 0.245645 46.172307 0.491291 69.262976 0.727905v597.415064H77.269029c-42.5093 0-76.935782-34.428288-76.935782-76.935782v-444.275017c0-42.484013 34.449963-76.93217 76.935782-76.93217z m-25.738582 102.533479v393.076011c0 0.899496 0.041543 1.798991 0.139079 2.700293 0.086698 0.857953 0.21494 1.703262 0.38653 2.550378 0.332344 1.625595 0.823635 3.224096 1.477485 4.757573a25.686202 25.686202 0 0 0 5.530634 8.187579 25.890304 25.890304 0 0 0 8.185773 5.539665 25.380951 25.380951 0 0 0 7.316982 1.864015c0.901302 0.095729 1.800798 0.137272 2.702099 0.137273h18.065775v-444.347266c-6.106817-0.075861-12.226278-0.139079-18.334901-0.204103a26.067313 26.067313 0 0 0-4.970707 0.523803c-1.629207 0.343181-3.225902 0.836278-4.757574 1.479291a26.713939 26.713939 0 0 0-4.362012 2.367949 25.90656 25.90656 0 0 0-3.834597 3.171716 25.951715 25.951715 0 0 0-3.182553 3.845435c-0.92117 1.372724-1.715905 2.828535-2.358919 4.351175a24.725295 24.725295 0 0 0-1.477485 4.757573c-0.171591 0.847115-0.299832 1.694231-0.38653 2.550378a24.727101 24.727101 0 0 0-0.139079 2.691262z" fill="#231815" p-id="3461"></path></svg>
                    </el-icon>  
                  </el-button>
                  <el-button @click="Update_Judge(idx-1, Errors[idx-1].id, 'unuseful')">
                    <el-icon>
                      <svg t="1676212189847" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3321" width="200" height="200"><path d="M906.654644 625.006824c-136.004473-0.865178-271.999915-1.724937-407.995357-2.593726 9.329107 32.817144 18.652795 65.634287 27.980096 98.449624 1.580439 5.563146 3.090436 11.153386 4.531797 16.759881 1.370918 5.335563 2.665975 10.6928 3.879752 16.066294 1.154172 5.104367 2.237902 10.223184 3.23674 15.352838a464.441422 464.441422 0 0 1 2.611788 14.65022c0.736936 4.627526 1.405236 9.260471 1.988645 13.913284 0.538252 4.381881 1.015094 8.774599 1.38898 13.176348 0.175203 2.064505 0.339569 4.139848 0.469616 6.204353 0.139079 2.075343 0.25287 4.150685 0.346794 6.222415 0.086698 1.945295 0.155335 3.888784 0.189652 5.832273 0.027093 0.971744 0.043349 1.954326 0.052381 2.92607 0.018062 0.971744 0.025287 1.941682 0.018062 2.913427 0 0.72068-0.009031 1.443167-0.027093 2.162041s-0.05238 1.441361-0.086699 2.162041c-0.045155 0.711649-0.088505 1.43233-0.14811 2.151203-0.061411 0.711649-0.130048 1.43233-0.198683 2.145785a87.23844 87.23844 0 0 1-0.608695 4.502897c-0.234808 1.491935-0.511159 2.985676-0.825441 4.470385a90.635933 90.635933 0 0 1-1.085536 4.607658c-0.399174 1.528059-0.830859 3.048893-1.309507 4.557084-0.487678 1.553346-1.007869 3.099467-1.562377 4.634751a108.57166 108.57166 0 0 1-5.998444 13.550234 112.563398 112.563398 0 0 1-10.649451 16.622609 107.480706 107.480706 0 0 1-6.119461 7.221252 99.354539 99.354539 0 0 1-6.386781 6.283827 83.851784 83.851784 0 0 1-6.422905 5.205515 68.681374 68.681374 0 0 1-6.206159 4.071212 54.498964 54.498964 0 0 1-5.745574 2.924264c-1.649075 0.718874-3.332469 1.354662-5.059212 1.85679-1.407042 0.417236-2.828535 0.756805-4.269895 0.971744-1.172234 0.184234-2.351694 0.287188-3.532959 0.29622-0.52019 0.009031-1.040381-0.009031-1.553346-0.043349a21.445206 21.445206 0 0 1-1.493741-0.155335 48.731715 48.731715 0 0 1-2.463679-0.435298c-0.581602-0.111985-1.155978-0.251064-1.728549-0.408205a30.655103 30.655103 0 0 1-0.747774-1.882077c-0.397368-1.101792-0.745967-2.221646-1.058442-3.3415a82.446548 82.446548 0 0 1-1.206553-4.965289 118.487788 118.487788 0 0 1-1.128885-6.292857 170.559197 170.559197 0 0 1-0.971744-7.506635c-0.312475-2.871884-0.556315-5.74738-0.76403-8.628295a269.433282 269.433282 0 0 1-0.294413-4.685325 390.798372 390.798372 0 0 1-0.373887-8.341107c-0.121016-3.59437-0.198684-7.194159-0.25287-10.78853a853.169871 853.169871 0 0 1-0.077667-11.579653v-67.689761c0-13.990951-1.266158-27.990934-3.782217-41.756108a237.13091 237.13091 0 0 0-10.770468-39.379127 242.979438 242.979438 0 0 0-7.708931-18.549841 249.393312 249.393312 0 0 0-9.121392-17.697307 253.66682 253.66682 0 0 0-22.04487-32.625685 258.397301 258.397301 0 0 0-26.549573-28.633946 260.05902 260.05902 0 0 0-14.782074-12.713957 260.745382 260.745382 0 0 0-15.717694-11.577846 256.103406 256.103406 0 0 0-32.468544-18.800905 251.768487 251.768487 0 0 0-25.622984-10.734344V99.713976H822.190552c1.224615 0 2.445617 0.05238 3.663007 0.164365a40.069102 40.069102 0 0 1 16.50701 5.207322 40.733789 40.733789 0 0 1 5.685969 3.948389 40.594711 40.594711 0 0 1 8.971477 10.450767 40.813263 40.813263 0 0 1 3.038055 6.256733c0.41543 1.110823 0.791123 2.239708 1.119854 3.375819 0.330538 1.181265 0.606889 2.369756 0.832666 3.567277 28.077632 148.08806 56.146233 296.174314 84.21664 444.262374a41.055296 41.055296 0 0 1 0.695393 9.244215 39.595873 39.595873 0 0 1-1.329375 8.704156 40.815069 40.815069 0 0 1-3.184359 8.183966 40.849387 40.849387 0 0 1-11.205766 13.470761c-1.154172 0.903108-2.360725 1.733968-3.610626 2.497997-1.249902 0.774867-2.552184 1.468454-3.877946 2.091598-1.363693 0.641207-2.759898 1.206552-4.183197 1.6852a41.423764 41.423764 0 0 1-5.747381 1.491935l-1.04038 0.182428c-0.686362 0.113792-1.379949 0.20049-2.07173 0.278157a35.203155 35.203155 0 0 1-4.015219 0.229389z m21.568029 74.748455c63.669124-12.045656 105.513736-73.426304 93.466273-137.09904-28.068601-148.086254-56.148039-296.172508-84.21664-444.269599-10.499535-55.382203-58.904325-95.47298-115.276335-95.47298H219.629577v596.688965l11.117262-0.106566c84.53634 8.142423 157.45871 82.168391 157.45871 169.040169v67.689761c0 74.972425 7.595139 134.801533 76.820184 144.858545 78.512609 11.40445 157.129979-76.46436 157.129979-166.202603 0-39.548912-7.271827-84.456867-21.64389-135.014667 101.962715 0.641207 203.92543 1.293251 305.889952 1.936264a116.295041 116.295041 0 0 0 21.820899-2.048249zM0.329634 544.126266V99.856667c0-42.502075 34.431901-76.943007 76.941201-76.943007h69.252139v597.416871l-69.252139 0.727905C34.777791 621.060242 0.329634 586.621116 0.329634 544.126266zM51.658689 521.219831a25.287028 25.287028 0 0 0 0.391949 2.543153c0.337762 1.63282 0.832666 3.227708 1.473872 4.766604a26.10705 26.10705 0 0 0 5.537859 8.191191c1.181265 1.181265 2.474516 2.239708 3.845435 3.177135 1.370918 0.92117 2.837566 1.719518 4.356593 2.36253 1.53709 0.650238 3.133785 1.145141 4.764799 1.473873 0.823635 0.175203 1.665331 0.303444 2.508834 0.391949 0.814604 0.088505 1.640044 0.139079 2.465485 0.139078 6.101399-0.070442 12.211828-0.131854 18.322258-0.198683V99.717588h-18.053131c-0.903108 0-1.80441 0.041543-2.698487 0.139079-0.859759 0.086698-1.710487 0.207715-2.552184 0.381111a25.462231 25.462231 0 0 0-9.121392 3.845435 26.199167 26.199167 0 0 0-3.836404 3.168103 25.818055 25.818055 0 0 0-3.168103 3.845435 25.494743 25.494743 0 0 0-2.369756 4.347562 26.029383 26.029383 0 0 0-1.473872 4.755768c-0.173397 0.850728-0.303444 1.701456-0.391949 2.552183-0.084892 0.903108-0.130048 1.806216-0.130048 2.700294v393.077817c-0.001806 0.894077 0.043349 1.797185 0.128242 2.689456z" fill="#231815" p-id="3322"></path></svg>
                    </el-icon>
                  </el-button>
                </div>
              </div>
            </div>
          </template>
          <div class="text item">
            <div class="normal_text" >
              原始文本：{{ Errors[idx-1].src }}
            </div>
          </div>
          <div class="text item">
            <div class="normal_text">
              纠错参考：
            </div>
            <div v-for="txt in Errors[idx-1].tgt">
              <div v-if="txt[1]==1" class="delete_text">{{ txt[0] }}</div>
              <div v-else-if="txt[1]==2" class="blue_text">{{ txt[0] }}</div>
              <div v-else class="normal_text">{{ txt[0] }}</div>
            </div>
          </div>
          <div>
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
          </div>
        </el-card>
        <div>
          <span>&nbsp;</span>
        </div>
      </div>
    </div>
    <div v-else>
      <el-space wrap>
        <el-card class="box-card" style="width: 1000px">
          <template #header>
            <div class="card-header">
              请先登录
            </div>
          </template>
          <div class="text item">
            <h1>纠错结果</h1>
          </div>
        </el-card>
      </el-space>  
    </div>
  </template>
  
  <script lang="ts" setup> 
    import axios from 'axios';
    import { computed, ref } from 'vue'
    import { useStore } from 'vuex'
    import { ElMessage, ElMessageBox } from 'element-plus'
    import useClipboard from 'vue-clipboard3'
    import type { Action } from 'element-plus'

    const { toClipboard } = useClipboard();

    const store = useStore()
    const LoggedIn = computed(() => store.state.log.LoggedIn || false)
  
    let FileName = computed(() => store.state.result.FileName)
    let date = computed(() => store.state.result.Date)
    let Errors = computed(() => store.state.result.Errors)
    let ErrorNum = computed(() => Errors.value.length)

    const result_mode = ref("均衡")
    // let Errors = [
    //   {
    //     id: 0,
    //     page: 0,
    //     src: "对本文的研究作出重要贡献的个人和集体，均已在文中以明确方式标明。",
    //     tgt: [["对本文的研究作出重要贡献的个人和集体，", 0],["均已在文中以明确方式标明。", 1]],
    //     judge: "useful"
    //   }
    // ]

    // let ErrorNum_test = 1

    // 更新反馈，发送给后端
    const Update_Judge = (idx: any, id: any, judge: string) => {
      let formData = new FormData();
      formData.append("id", id);
      formData.append("judge", judge);
      console.log("开始反馈")
      axios.post('/judge', formData).then((res: any) => {
        if(res.data.message=="反馈成功！") {
          store.commit('result/UPDATE_JUDGE', [Errors, idx, judge])
          console.log("用户反馈更新成功！id:", idx, "judge:", judge)
          ElMessage("用户反馈更新成功！")
        }
        else {
          console.log("反馈更新失败！未知错误")
        }
      })
    }

    const copy = async (val: string) => {
      try {
        await toClipboard(val);
        console.log('复制成功!')
        ElMessage("内容已复制到剪切板！")
      } catch (e) {
        console.log(e);
        ElMessage("抱歉，复制失败！")
      }
    };

    const copy_tgt = async (val: any) => {
      try {
        let tgt_txt = ""
        for (let txt of val) {
          if (txt[1] == 1){
            continue
          }
          tgt_txt += txt[0];
        }
        await toClipboard(tgt_txt);
        console.log('复制成功!')
        ElMessage("内容已复制到剪切板！")
      } catch (e) {
        console.log(e);
        ElMessage("抱歉，复制失败！")
      }
    };

    const ChangeResultMode = () => {
      let formData = new FormData();
      formData.append("FileId", store.state.result.Id);
      formData.append("UserName", store.state.log.UserName);
      formData.append("ResultMode", result_mode.value);
      axios.post('/ChangeResultMode', formData).then(res => {
        if(res.data[4] != 707){
          if(Array.isArray(res.data[2])) {
            store.commit('result/UPDATE_GECRESULT', res.data)
            console.log("纠错参考更新完成")
            ElMessageBox.alert(res.data[3], '提示', {
              confirmButtonText: 'OK',
              callback: (action: Action) => {
                ElMessage({
                  type: 'info',
                  message: res.data[3],
                })
              },
            })
          }
        }
        else{
          store.commit('log/UPDATE_LOG', false)
          store.commit('log/UPDATE_EXIT', false)
        }
        if (res.data[3]) {
          ElMessage(res.data[3])
        }
      })
    }

</script>
  
  <style>
  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 20px;
  }
  
  .text {
    font-size: 14px;
  }
  
  .item {
    margin-bottom: 36px;
  }
  
  .box-card {
    width: 100%;
  }
  </style>